(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{309:function(s,t,n){s.exports=n.p+"assets/img/dir.38db77f5.png"},379:function(s,t,n){"use strict";n.r(t);var a=n(43),e=Object(a.a)({},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"开发前的项目配置"}},[s._v("开发前的项目配置")]),s._v(" "),a("p",[s._v("通常一个完整健壮的项目，需要良好的团队协作，我们需要统一好编码风格以及代码风格按照一定规范来编码。")]),s._v(" "),a("p",[s._v("我们新建一个项目目录 blog")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" blog "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cd")]),s._v(" blog\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在项目目录下运行 "),a("code",[s._v("npm init")]),s._v(" 生成package.json 初识化项目")]),s._v(" "),a("h2",{attrs:{id:"规划项目目录结构"}},[s._v("规划项目目录结构")]),s._v(" "),a("p",[s._v("在blog 下建立如下目录及文件，现在在这个项目中有"),a("code",[s._v("models")]),s._v(" 层  、"),a("code",[s._v("views")]),s._v(" 视图、"),a("code",[s._v("routes")]),s._v(" 路由等")]),s._v(" "),a("p",[a("img",{attrs:{src:n(309),alt:""}})]),s._v(" "),a("p",[s._v("我们还用到了ESLint 来检查代码风格，使用editorconfig来统一编码风格，使用Git 管理项目，commitizen来统一Commit message。")]),s._v(" "),a("p",[s._v("现在这几个目录都是空的，但Git不跟踪空目录，我们在目录下建立了个"),a("code",[s._v(".gitkeep")]),s._v("  .gitkeep 是一个约定俗成的文件名并不带有特殊规则。我们还用到了"),a("code",[s._v(".gitignore")]),s._v("文件，文件的内容为我们要忽略提交到Git的文件，Git就会自动忽略这些文件。例如：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(".DS_Store\nnode_modules\n*.log\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"使用editorconfig"}},[s._v("使用editorconfig")]),s._v(" "),a("p",[s._v("在项目中我们使用 "),a("code",[s._v(".editorconfig")]),s._v(" 文件 统一代码风格 ，该文件用来定义项目的编码规范如：缩进方式、换行符，编码等。编辑器的行为会与.editorconfig 文件中定义的一致，并且其优先级比编辑器自身的设置要高，这在多人合作开发项目时十分有用而且必要。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# editorconfig.org\nroot = true\n\n[*]\nindent_style = space\nindent_size = 2\nend_of_line = lf\ncharset = utf-8\ntrim_trailing_whitespace = true\ninsert_final_newline = true\n\n[*.md]\ntrim_trailing_whitespace = false\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("更多配置请查看 "),a("a",{attrs:{href:"http://editorconfig.org",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://editorconfig.org"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"使用commitizen"}},[s._v("使用commitizen")]),s._v(" "),a("p",[s._v("在这项目中我们使用了Git 来作为版本控制器，如果你还不太会GIt 请先阅读 "),a("a",{attrs:{href:"https://mp.weixin.qq.com/s/-TC07TQoiTNRUJIdBv46SQ",target:"_blank",rel:"noopener noreferrer"}},[s._v("一篇文章，教你学会Git"),a("OutboundLink")],1),s._v(" ，写好Commit message 则可参考 "),a("a",{attrs:{href:"https://mp.weixin.qq.com/s/wH-msSi8pBkcZBux0yLhng",target:"_blank",rel:"noopener noreferrer"}},[s._v("更优雅的使用Git"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("使用npm 全局安装")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm install -g commitizen\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在项目中使用 angular 的 commit 规范")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ commitizen init cz-conventional-changelog --save-dev --save-exact\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后我们就可以愉快的使用 git cz 代替 git commit 命令了。当然我们也可也将其加到npm script 中")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('"script": {    \n\t"commit": "git cz"\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("然后直接使用"),a("code",[s._v("npm run commit")]),s._v(" 或者使用 "),a("code",[s._v("git cz")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://github.com/commitizen/cz-cli/raw/master/meta/screenshots/add-commit.png",alt:"Add and commit with Commitizen"}})]),s._v(" "),a("h2",{attrs:{id:"使用eslint"}},[s._v("使用ESLint")]),s._v(" "),a("p",[s._v("ESLint 是一个插件化的javascript代码检测工具，它可以用于检查常见的JavaScript代码错误，也可以进行代码风格检查，这样我们就可以根据自己的喜好指定一套ESLint配置，然后应用到所编写的项目上，从而实现辅助编码规范的执行，有效控制项目代码的质量。")]),s._v(" "),a("p",[s._v("在开始使用ESLint之前，我们需要通过NPM来安装它：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g eslint\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 我们也可以将它安装到项目开发依赖中")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save-dev eslint\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("接下来就可以使用 "),a("code",[s._v("eslint*.js")]),s._v(" 来检查代码。我们还可以与 Git hooks 配合，在提交时自动检查")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save-dev lint-staged husky\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://www.npmjs.com/package/husky",target:"_blank",rel:"noopener noreferrer"}},[s._v("husky"),a("OutboundLink")],1),s._v(" 可以方便我使用Git hooks,我们用来配置在提交代码是检查代码")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/okonet/lint-staged",target:"_blank",rel:"noopener noreferrer"}},[s._v("lint-staged"),a("OutboundLink")],1),s._v(" 每次提交只检查本次提交所修改的文件")]),s._v(" "),a("p",[s._v("关于代码风格，我们使用"),a("a",{attrs:{href:"https://github.com/standard/standard",target:"_blank",rel:"noopener noreferrer"}},[s._v(" JavaScript standard style"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save-dev eslint-config-standard eslint-plugin-standard eslint-plugin-promise eslint-plugin-import eslint-plugin-node\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后配置 "),a("code",[s._v(".eslintrc")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n  "extends": "standard"\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("你也可以直接使用"),a("code",[s._v("eslint —init")]),s._v("  来初始化 eslint 配置，eslint 会创建一个 .eslintrc.json 的配置文件，同时自动安装相关模块，省去了我们手动安装配置")]),s._v(" "),a("h2",{attrs:{id:"使用git-hooks自动检查代码"}},[s._v("使用Git hooks自动检查代码")]),s._v(" "),a("p",[s._v("我们在package.json 稍做配置即可")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("// 配置husky 在提交代码时运行lint-staged\n"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"husky"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hooks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"pre-commit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lint-staged"')]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n// 配置lint-staged 只在检查本次提交的代码\n"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint-staged"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"*.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint --fix"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git add"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("到此我们的这个项目配置的差不多了，也是一套比较流行的工作流。")]),s._v(" "),a("p",[s._v("最后来把我们要用到的Koa相关的包给安装着，具体开发还是放到下一节")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save koa koa-router koa-views koa-static\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])},[],!1,null,null,null);e.options.__file="3.1开发前的项目配置.md";t.default=e.exports}}]);