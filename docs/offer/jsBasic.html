<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript基础 | 忙 · 南易</title>
    <meta name="description" content="">
    <link rel="apple-touch-icon" sizes="128x128" href="/favicon_128.ico">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/assets/css/0.styles.8c3d1e2d.css" as="style"><link rel="preload" href="/assets/js/app.239b68c1.js" as="script"><link rel="preload" href="/assets/js/4.d46d2a2b.js" as="script"><link rel="preload" href="/assets/js/108.9ca655c2.js" as="script"><link rel="prefetch" href="/assets/js/10.b85db015.js"><link rel="prefetch" href="/assets/js/100.090b8e5b.js"><link rel="prefetch" href="/assets/js/101.bbb676d9.js"><link rel="prefetch" href="/assets/js/102.31f82669.js"><link rel="prefetch" href="/assets/js/103.3fb1b48a.js"><link rel="prefetch" href="/assets/js/104.80be1959.js"><link rel="prefetch" href="/assets/js/105.89cad783.js"><link rel="prefetch" href="/assets/js/106.cb6bd33d.js"><link rel="prefetch" href="/assets/js/107.c7d98004.js"><link rel="prefetch" href="/assets/js/109.5e2ba8b1.js"><link rel="prefetch" href="/assets/js/11.8a5621e5.js"><link rel="prefetch" href="/assets/js/110.b867730c.js"><link rel="prefetch" href="/assets/js/111.242ec554.js"><link rel="prefetch" href="/assets/js/112.bbd310d2.js"><link rel="prefetch" href="/assets/js/113.2ba206f8.js"><link rel="prefetch" href="/assets/js/114.644edd11.js"><link rel="prefetch" href="/assets/js/115.a339d164.js"><link rel="prefetch" href="/assets/js/116.cf7458b9.js"><link rel="prefetch" href="/assets/js/117.e2e9ca56.js"><link rel="prefetch" href="/assets/js/118.7e01e661.js"><link rel="prefetch" href="/assets/js/119.7073a3db.js"><link rel="prefetch" href="/assets/js/12.8ca07f51.js"><link rel="prefetch" href="/assets/js/120.9c083d37.js"><link rel="prefetch" href="/assets/js/121.ac7f0ca1.js"><link rel="prefetch" href="/assets/js/122.64c5b517.js"><link rel="prefetch" href="/assets/js/123.8a0a80cb.js"><link rel="prefetch" href="/assets/js/124.b76549a6.js"><link rel="prefetch" href="/assets/js/125.02891ed0.js"><link rel="prefetch" href="/assets/js/126.a80fde29.js"><link rel="prefetch" href="/assets/js/127.9672de41.js"><link rel="prefetch" href="/assets/js/128.a8f89366.js"><link rel="prefetch" href="/assets/js/129.b3a2be2c.js"><link rel="prefetch" href="/assets/js/13.4f05305e.js"><link rel="prefetch" href="/assets/js/130.f5bbfe20.js"><link rel="prefetch" href="/assets/js/131.619a21f8.js"><link rel="prefetch" href="/assets/js/132.b01b8b37.js"><link rel="prefetch" href="/assets/js/133.4382d00b.js"><link rel="prefetch" href="/assets/js/14.5db8683e.js"><link rel="prefetch" href="/assets/js/15.6b87427e.js"><link rel="prefetch" href="/assets/js/16.e1fdb4cb.js"><link rel="prefetch" href="/assets/js/17.e8dfb0d0.js"><link rel="prefetch" href="/assets/js/18.9b867385.js"><link rel="prefetch" href="/assets/js/19.d3b46571.js"><link rel="prefetch" href="/assets/js/20.0bd7a691.js"><link rel="prefetch" href="/assets/js/21.f2ee9685.js"><link rel="prefetch" href="/assets/js/22.16c26579.js"><link rel="prefetch" href="/assets/js/23.f0774a27.js"><link rel="prefetch" href="/assets/js/24.290660c4.js"><link rel="prefetch" href="/assets/js/25.706f054c.js"><link rel="prefetch" href="/assets/js/26.6cfc93c6.js"><link rel="prefetch" href="/assets/js/27.6a7f220d.js"><link rel="prefetch" href="/assets/js/28.bd142947.js"><link rel="prefetch" href="/assets/js/29.a2b14612.js"><link rel="prefetch" href="/assets/js/3.818110a1.js"><link rel="prefetch" href="/assets/js/30.9f7add30.js"><link rel="prefetch" href="/assets/js/31.fc0eadbc.js"><link rel="prefetch" href="/assets/js/32.0972df93.js"><link rel="prefetch" href="/assets/js/33.78a10b29.js"><link rel="prefetch" href="/assets/js/34.f80e138d.js"><link rel="prefetch" href="/assets/js/35.f52d3dc4.js"><link rel="prefetch" href="/assets/js/36.e223d306.js"><link rel="prefetch" href="/assets/js/37.aeeb8e54.js"><link rel="prefetch" href="/assets/js/38.f65fd618.js"><link rel="prefetch" href="/assets/js/39.7e851236.js"><link rel="prefetch" href="/assets/js/40.d019d91b.js"><link rel="prefetch" href="/assets/js/41.c962b044.js"><link rel="prefetch" href="/assets/js/42.8cd2d4d1.js"><link rel="prefetch" href="/assets/js/43.d1549175.js"><link rel="prefetch" href="/assets/js/44.b108b4ff.js"><link rel="prefetch" href="/assets/js/45.3390da9f.js"><link rel="prefetch" href="/assets/js/46.b1a33f56.js"><link rel="prefetch" href="/assets/js/47.d9b28254.js"><link rel="prefetch" href="/assets/js/48.982bd1ea.js"><link rel="prefetch" href="/assets/js/49.3f86d8d4.js"><link rel="prefetch" href="/assets/js/5.93da9e01.js"><link rel="prefetch" href="/assets/js/50.2b473707.js"><link rel="prefetch" href="/assets/js/51.37a14f99.js"><link rel="prefetch" href="/assets/js/52.a9a5bf81.js"><link rel="prefetch" href="/assets/js/53.5df34f20.js"><link rel="prefetch" href="/assets/js/54.eee1fc68.js"><link rel="prefetch" href="/assets/js/55.8c60f9b3.js"><link rel="prefetch" href="/assets/js/56.4427e1a8.js"><link rel="prefetch" href="/assets/js/57.9a90a4bc.js"><link rel="prefetch" href="/assets/js/58.5989177f.js"><link rel="prefetch" href="/assets/js/59.5b9bee7d.js"><link rel="prefetch" href="/assets/js/6.ee63d877.js"><link rel="prefetch" href="/assets/js/60.9d11c5de.js"><link rel="prefetch" href="/assets/js/61.f8a874b8.js"><link rel="prefetch" href="/assets/js/62.5ae74cbf.js"><link rel="prefetch" href="/assets/js/63.860cbb55.js"><link rel="prefetch" href="/assets/js/64.91d218ca.js"><link rel="prefetch" href="/assets/js/65.cf09d12a.js"><link rel="prefetch" href="/assets/js/66.3e9ee600.js"><link rel="prefetch" href="/assets/js/67.efa5e577.js"><link rel="prefetch" href="/assets/js/68.c2dfb597.js"><link rel="prefetch" href="/assets/js/69.9ee476ed.js"><link rel="prefetch" href="/assets/js/7.9b9102dd.js"><link rel="prefetch" href="/assets/js/70.8d130c77.js"><link rel="prefetch" href="/assets/js/71.a10dbf8e.js"><link rel="prefetch" href="/assets/js/72.ae7c169f.js"><link rel="prefetch" href="/assets/js/73.d9a699cd.js"><link rel="prefetch" href="/assets/js/74.a1b1fcc0.js"><link rel="prefetch" href="/assets/js/75.cac138d8.js"><link rel="prefetch" href="/assets/js/76.41fe939b.js"><link rel="prefetch" href="/assets/js/77.d0a38d4e.js"><link rel="prefetch" href="/assets/js/78.75712491.js"><link rel="prefetch" href="/assets/js/79.21229e83.js"><link rel="prefetch" href="/assets/js/8.d1ef3d0e.js"><link rel="prefetch" href="/assets/js/80.e54b6c68.js"><link rel="prefetch" href="/assets/js/81.07a2f128.js"><link rel="prefetch" href="/assets/js/82.85dcf320.js"><link rel="prefetch" href="/assets/js/83.e66d93e5.js"><link rel="prefetch" href="/assets/js/84.c9f4cb8f.js"><link rel="prefetch" href="/assets/js/85.95ab5948.js"><link rel="prefetch" href="/assets/js/86.ec0deee5.js"><link rel="prefetch" href="/assets/js/87.5a7655e9.js"><link rel="prefetch" href="/assets/js/88.c913802f.js"><link rel="prefetch" href="/assets/js/89.2854c732.js"><link rel="prefetch" href="/assets/js/9.36a96d9e.js"><link rel="prefetch" href="/assets/js/90.09365798.js"><link rel="prefetch" href="/assets/js/91.72e30caa.js"><link rel="prefetch" href="/assets/js/92.46a94a91.js"><link rel="prefetch" href="/assets/js/93.9a476cea.js"><link rel="prefetch" href="/assets/js/94.94b873fd.js"><link rel="prefetch" href="/assets/js/95.da1f2715.js"><link rel="prefetch" href="/assets/js/96.0cbbd52d.js"><link rel="prefetch" href="/assets/js/97.4861832d.js"><link rel="prefetch" href="/assets/js/98.2ad82200.js"><link rel="prefetch" href="/assets/js/99.1d20b9eb.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.9c5dedbe.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8c3d1e2d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="忙 · 南易" class="logo"> <span class="site-name can-hide">忙 · 南易</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/node/" class="nav-link">node</a></div><div class="nav-item"><a href="/offer/" class="nav-link router-link-active">offer之道</a></div><div class="nav-item"><a href="/interviewQuestions/bytedance.html" class="nav-link">大厂真题</a></div> <a href="https://github.com/zhenquan321" target="_blank" rel="noopener noreferrer" class="repo-link">
    Git
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/node/" class="nav-link">node</a></div><div class="nav-item"><a href="/offer/" class="nav-link router-link-active">offer之道</a></div><div class="nav-item"><a href="/interviewQuestions/bytedance.html" class="nav-link">大厂真题</a></div> <a href="https://github.com/zhenquan321" target="_blank" rel="noopener noreferrer" class="repo-link">
    Git
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>前言</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/offer/" class="sidebar-link">声明·感谢：</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>面试技巧</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>推荐</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>前端基础</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/offer/htmlBasic.html" class="sidebar-link">HTML基础</a></li><li><a href="/offer/cssBasic.html" class="sidebar-link">CSS基础</a></li><li><a href="/offer/jsBasic.html" class="active sidebar-link">JavaScript基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#本章索引" class="sidebar-link">本章索引</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#手写promise" class="sidebar-link">手写promise</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#解释下变量提升？✨" class="sidebar-link">解释下变量提升？✨</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#一段javascript代码是如何执行的？✨" class="sidebar-link">一段JavaScript代码是如何执行的？✨</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#理解闭包吗？✨" class="sidebar-link">理解闭包吗？✨</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#javascript的作用域链理解吗？✨" class="sidebar-link">JavaScript的作用域链理解吗？✨</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#es6模块与commonjs模块有什么区别？" class="sidebar-link">ES6模块与CommonJS模块有什么区别？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#js有哪些类型？" class="sidebar-link">js有哪些类型？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#为什么会有bigint的提案？" class="sidebar-link">为什么会有BigInt的提案？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#null与undefined的区别是什么？" class="sidebar-link">null与undefined的区别是什么？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#_0-1-0-2为什么不等于0-3？" class="sidebar-link">0.1+0.2为什么不等于0.3？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#类型转换的规则有哪些？" class="sidebar-link">类型转换的规则有哪些？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#类型转换的原理是什么？" class="sidebar-link">类型转换的原理是什么？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#谈谈你对原型链的理解？✨" class="sidebar-link">谈谈你对原型链的理解？✨</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#如何判断是否是数组？" class="sidebar-link">如何判断是否是数组？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#谈一谈你对this的了解？✨" class="sidebar-link">谈一谈你对this的了解？✨</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#那么箭头函数的this指向哪里？✨" class="sidebar-link">那么箭头函数的this指向哪里？✨</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#async-await是什么？" class="sidebar-link">async/await是什么？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#async-await相比于promise的优势？" class="sidebar-link">async/await相比于Promise的优势？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#javascript的参数是按照什么方式传递的？" class="sidebar-link">JavaScript的参数是按照什么方式传递的？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#聊一聊如何在javascript中实现不可变对象？" class="sidebar-link">聊一聊如何在JavaScript中实现不可变对象？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#javascript的基本类型和复杂类型是储存在哪里的？" class="sidebar-link">JavaScript的基本类型和复杂类型是储存在哪里的？</a></li><li class="sidebar-sub-header"><a href="/offer/jsBasic.html#讲讲javascript垃圾回收是怎么做的？" class="sidebar-link">讲讲JavaScript垃圾回收是怎么做的？</a></li></ul></li><li><a href="/offer/es6-7-8.html" class="sidebar-link">ES6/7/8</a></li><li><a href="/offer/browser.html" class="sidebar-link">浏览器与新技术</a></li><li><a href="/offer/dom.html" class="sidebar-link">DOM</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>前端基础笔试</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>前端原理详解</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>计算机基础</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>前端框架</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>框架原理详解</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>框架实战技巧</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>工程化</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>工程化原理</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>安全</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content default"><h1 id="javascript基础">JavaScript基础</h1> <p>终于到了大家最擅长的JavaScript部分，相比于HTML和CSS笔者写起JavaScript要顺手很多，虽然前端有三剑客的说法，但是实际应用中基本就是JavaScript为绝对主导，尤其是在工程化的今天。</p> <p>所以JavaScript才是前端基础面试中的重中之重，在这部分我们会加入一个新的部分就是原理性的解释。</p> <p>比如，我们会有一个面试问题『解释下变量提升？』，在本章下我们会有一个简短的解释，但是不会解释原理性的东西，因为『简短的解释』是给面试官听的，『原理性的』是给自己解释的，原理性的解释会在相关问题下连接到其他各个原理性详解的章节。</p> <p>再说一下为什么会有『原理详解』这一part，本项目并不仅想作为面试季帮助大家突击的一个清单，更想做的是帮助大家梳理前端的各个知识点，并把知识点讲透彻，这才是真正对每个开发者有成长的事情。</p> <p>此外，如果不懂原理，很容易被较真的面试官追问，一下就原形毕露了，所以如果你不懂原理，建议阅读原理部分，如果你已经懂了，可以看简答部分作为梳理即可。</p> <blockquote><p>我们约定，每个问题后我们标记『✨』的为高频面试题</p></blockquote> <h2 id="本章索引">本章索引</h2> <ul><li><ol><li>js基础</li></ol> <ul><li><a href="#%E8%B0%88%E8%B0%88%E4%BD%A0%E5%AF%B9%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%9A%84%E7%90%86%E8%A7%A3%EF%BC%9F%E2%9C%A8">谈谈你对原型链的理解？ ✨</a></li> <li><a href="#%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E6%98%AF%E6%95%B0%E7%BB%84%EF%BC%9F">如何判断是否是数组？</a></li> <li><a href="#ES6%E6%A8%A1%E5%9D%97%E4%B8%8ECommonJS%E6%A8%A1%E5%9D%97%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F">ES6模块与CommonJS模块有什么区别？</a></li> <li><a href="#%E8%81%8A%E4%B8%80%E8%81%8A%E5%A6%82%E4%BD%95%E5%9C%A8JavaScript%E4%B8%AD%E5%AE%9E%E7%8E%B0%E4%B8%8D%E5%8F%AF%E5%8F%98%E5%AF%B9%E8%B1%A1%EF%BC%9F">聊一聊如何在JavaScript中实现不可变对象？</a></li> <li><a href="#JavaScript%E7%9A%84%E5%8F%82%E6%95%B0%E6%98%AF%E6%8C%89%E7%85%A7%E4%BB%80%E4%B9%88%E6%96%B9%E5%BC%8F%E4%BC%A0%E9%80%92%E7%9A%84%EF%BC%9F">JavaScript的参数是按照什么方式传递的？</a></li> <li><a href="#js%E6%9C%89%E5%93%AA%E4%BA%9B%E7%B1%BB%E5%9E%8B%EF%BC%9F">js有哪些类型?</a></li> <li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E6%9C%89BigInt%E7%9A%84%E6%8F%90%E6%A1%88%EF%BC%9F">为什么会有BigInt的提案？</a></li> <li><a href="#null%E4%B8%8Eundefined%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F">null与undefined的区别是什么？</a></li> <li><a href="#0.1+0.2%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%AD%89%E4%BA%8E0.3%EF%BC%9F">0.1+0.2为什么不等于0.3？</a></li> <li><a href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E7%9A%84%E8%A7%84%E5%88%99%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F">类型转换的规则有哪些？</a></li> <li><a href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E7%9A%84%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F">类型转换的原理是什么？</a></li></ul></li> <li><ol start="2"><li>js机制</li></ol> <ul><li><a href="#%E8%A7%A3%E9%87%8A%E4%B8%8B%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87%EF%BC%9F%E2%9C%A8">解释下变量提升？✨</a></li> <li><a href="#%E4%B8%80%E6%AE%B5JavaScript%E4%BB%A3%E7%A0%81%E6%98%AF%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8C%E7%9A%84%EF%BC%9F%E2%9C%A8">一段JavaScript代码是如何执行的？✨</a></li> <li><a href="#JavaScript%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE%E7%90%86%E8%A7%A3%E5%90%97%EF%BC%9F%E2%9C%A8">JavaScript的作用域链理解吗？✨</a></li> <li><a href="#%E8%B0%88%E4%B8%80%E8%B0%88%E4%BD%A0%E5%AF%B9this%E7%9A%84%E4%BA%86%E8%A7%A3%EF%BC%9F%E2%9C%A8">谈一谈你对this的了解？✨</a></li> <li><a href="#%E9%82%A3%E4%B9%88%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E7%9A%84this%E6%8C%87%E5%90%91%E5%93%AA%E9%87%8C%EF%BC%9F%E2%9C%A8">箭头函数的this指向哪里？✨</a></li> <li><a href="#%E7%90%86%E8%A7%A3%E9%97%AD%E5%8C%85%E5%90%97%EF%BC%9F%E2%9C%A8">理解闭包吗？✨</a></li></ul></li> <li><ol start="3"><li>js内存</li></ol> <ul><li><a href="#%E8%AE%B2%E8%AE%B2JavaScript%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%98%AF%E6%80%8E%E4%B9%88%E5%81%9A%E7%9A%84%EF%BC%9F">讲讲JavaScript垃圾回收是怎么做的？</a></li> <li><a href="#JavaScript%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B%E6%98%AF%E5%82%A8%E5%AD%98%E5%9C%A8%E5%93%AA%E9%87%8C%E7%9A%84%EF%BC%9F">JavaScript的基本类型和复杂类型是储存在哪里的？</a></li></ul></li> <li><ol start="4"><li>异步</li></ol> <ul><li><a href="#async/await%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F">async/await 是什么？</a></li> <li><a href="#async/await%E7%9B%B8%E6%AF%94%E4%BA%8EPromise%E7%9A%84%E4%BC%98%E5%8A%BF%EF%BC%9F">async/await 相比于Promise的优势？</a></li></ul></li></ul> <h2 id="手写promise">手写promise</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token keyword">class</span> <span class="token class-name">MyPromise</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 定义Promise 三种状态</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>states <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token constant">PENDING</span><span class="token punctuation">:</span> <span class="token string">'PENDING'</span><span class="token punctuation">,</span> <span class="token constant">RESOLVED</span><span class="token punctuation">:</span> <span class="token string">'RESOLVED'</span><span class="token punctuation">,</span> <span class="token constant">REJECTED</span><span class="token punctuation">:</span> <span class="token string">'REJECTED'</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 定义传递到then的value</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token comment">// 定义当前Promise运行状态</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>states<span class="token punctuation">.</span><span class="token constant">PENDING</span>
      <span class="token comment">// 定义Promise失败状态的回调函数集合</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>resolvedCallBacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token comment">// 定义Promise成功状态的回调函数集合</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>rejectedCallBacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token comment">// 为静态方法定义其内部使用的指向实例的that  </span>
      MyPromise<span class="token punctuation">.</span>that <span class="token operator">=</span> <span class="token keyword">this</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// 执行 new MyPromise() 内传入的方法</span>
          <span class="token function">fn</span><span class="token punctuation">(</span>MyPromise<span class="token punctuation">.</span>resolve<span class="token punctuation">,</span> MyPromise<span class="token punctuation">.</span>reject<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          MyPromise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
    <span class="token comment">// 静态resolve方法，MyPromise实例不可访问；</span>
    <span class="token comment">//支持类MyPromise访问，例：MyPromise.resolve('success').then(e=&gt;e)</span>
  <span class="token keyword">static</span> <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 由于静态方法内部的this指向 类 而不是 实例，所以用下面的方法访问实例对象</span>
      <span class="token keyword">const</span> that <span class="token operator">=</span> MyPromise<span class="token punctuation">.</span>that
      <span class="token comment">// 判断是否是MyPromise实例访问resolve</span>
      <span class="token keyword">const</span> f <span class="token operator">=</span> that <span class="token keyword">instanceof</span> <span class="token class-name">MyPromise</span>
      <span class="token comment">// MyPromise实例对象访问resolve</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token operator">&amp;&amp;</span> that<span class="token punctuation">.</span>state <span class="token operator">==</span> that<span class="token punctuation">.</span>states<span class="token punctuation">.</span><span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          that<span class="token punctuation">.</span>state <span class="token operator">=</span> that<span class="token punctuation">.</span>states<span class="token punctuation">.</span><span class="token constant">RESOLVED</span>
          that<span class="token punctuation">.</span>value <span class="token operator">=</span> value
          that<span class="token punctuation">.</span>resolvedCallBacks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>cb <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token function">cb</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// MyPromise类访问resolve</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
              state<span class="token punctuation">:</span> obj<span class="token punctuation">.</span>states<span class="token punctuation">.</span><span class="token constant">RESOLVED</span><span class="token punctuation">,</span>
              value
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
   <span class="token comment">// 静态reject方法，MyPromise实例不可访问；</span>
   <span class="token comment">//支持类MyPromise访问，例：MyPromise.reject('fail').then(e=&gt;e)</span>
  <span class="token keyword">static</span> <span class="token function">reject</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> that <span class="token operator">=</span> MyPromise<span class="token punctuation">.</span>that
      <span class="token keyword">const</span> f <span class="token operator">=</span> that <span class="token keyword">instanceof</span> <span class="token class-name">MyPromise</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token operator">&amp;&amp;</span> that<span class="token punctuation">.</span>state <span class="token operator">==</span> that<span class="token punctuation">.</span>states<span class="token punctuation">.</span><span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          that<span class="token punctuation">.</span>state <span class="token operator">=</span> that<span class="token punctuation">.</span>states<span class="token punctuation">.</span><span class="token constant">REJECTED</span>
          that<span class="token punctuation">.</span>value <span class="token operator">=</span> value
          that<span class="token punctuation">.</span>rejectedCallBacks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>cb <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token function">cb</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
              state<span class="token punctuation">:</span> obj<span class="token punctuation">.</span>states<span class="token punctuation">.</span><span class="token constant">REJECTED</span><span class="token punctuation">,</span>
              value
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 定义在MyPromise原型上的then方法</span>
  <span class="token function">then</span><span class="token punctuation">(</span>onFulfilled<span class="token punctuation">,</span> onRejected<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token constant">PENDING</span><span class="token punctuation">,</span> <span class="token constant">RESOLVED</span><span class="token punctuation">,</span> <span class="token constant">REJECTED</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>states
      <span class="token keyword">const</span> f <span class="token operator">=</span> <span class="token keyword">typeof</span> onFulfilled <span class="token operator">==</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">?</span> onFulfilled <span class="token punctuation">:</span> c <span class="token operator">=&gt;</span> c<span class="token punctuation">;</span>
      <span class="token keyword">const</span> r <span class="token operator">=</span>
          <span class="token keyword">typeof</span> onRejected <span class="token operator">==</span> <span class="token string">&quot;function&quot;</span>
              <span class="token operator">?</span> onRejected
              <span class="token punctuation">:</span> c <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                  <span class="token keyword">throw</span> c<span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">case</span> <span class="token constant">PENDING</span><span class="token punctuation">:</span>
              <span class="token comment">// ‘PENDING’状态下向回调函数集合添加callback</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>resolvedCallBacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>rejectedCallBacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
              <span class="token keyword">break</span><span class="token punctuation">;</span>
          <span class="token keyword">case</span> <span class="token constant">RESOLVED</span><span class="token punctuation">:</span>
              <span class="token comment">// 将回调函数的返回值赋值给 实例的 value，满足链式调用then方法时传递value</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
              <span class="token keyword">break</span><span class="token punctuation">;</span>
          <span class="token keyword">case</span> <span class="token constant">REJECTED</span><span class="token punctuation">:</span>
              <span class="token comment">// 同上</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
              <span class="token keyword">break</span><span class="token punctuation">;</span>
          <span class="token keyword">default</span><span class="token punctuation">:</span>
              <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 满足链式调用then，返回MyPromise实例对象</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

MyPromise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> e <span class="token operator">+</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> res<span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span>resolve <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res1 <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res2 <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res2 <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br></div></div><h2 id="解释下变量提升？✨">解释下变量提升？✨</h2> <p>JavaScript引擎的工作方式是，先解析代码，获取所有被声明的变量，然后再一行一行地运行。这造成的结果，就是所有的变量的声明语句，都会被提升到代码的头部，这就叫做变量提升（hoisting）。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// undefined</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>

<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>上面的代码实际执行顺序是这样的:</p> <p>第一步： 引擎将<code>var a = 1</code>拆解为<code>var a = undefined</code>和 <code>a = 1</code>，并将<code>var a = undefined</code>放到最顶端，<code>a = 1</code>还在原来的位置</p> <p>这样一来代码就是这样:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> undefined
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// undefined</span>

a <span class="token operator">=</span> <span class="token number">1</span>

<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>第二步就是执行，因此js引擎一行一行从上往下执行就造成了当前的结果，这就叫变量提升。</p> <blockquote><p>原理详解请移步,<a href="/offer/hoisting.html">预解释与变量提升</a></p></blockquote> <h2 id="一段javascript代码是如何执行的？✨">一段JavaScript代码是如何执行的？✨</h2> <blockquote><p>此部分涉及概念较多，请移步<a href="mechanism">JavaScript执行机制</a></p></blockquote> <h2 id="理解闭包吗？✨">理解闭包吗？✨</h2> <p>这个问题其实在问：</p> <ol><li>闭包是什么？</li> <li>闭包有什么作用？</li></ol> <h3 id="闭包是什么">闭包是什么</h3> <p>MDN的解释：闭包是函数和声明该函数的词法环境的组合。</p> <p>按照我的理解就是：闭包 =『函数』和『函数体内可访问的变量总和』</p> <p>举个简单的例子:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">2</span>

        <span class="token keyword">var</span> sum <span class="token operator">=</span> b <span class="token operator">+</span> a
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
    <span class="token punctuation">}</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>add</code>函数本身，以及其内部可访问的变量，即 <code>a = 1</code>，这两个组合在一起就被称为闭包，仅此而已。</p> <h3 id="闭包的作用">闭包的作用</h3> <p>闭包最大的作用就是隐藏变量，闭包的一大特性就是<strong>内部函数总是可以访问其所在的外部函数中声明的参数和变量，即使在其外部函数被返回（寿命终结）了之后</strong></p> <p>基于此特性，JavaScript可以实现私有变量、特权变量、储存变量等</p> <p>我们就以私有变量举例，私有变量的实现方法很多，有靠约定的（变量名前加_）,有靠Proxy代理的，也有靠Symbol这种新数据类型的。</p> <p>但是真正广泛流行的其实是使用闭包。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'cxk'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
        name <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> cxk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cxk<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//cxk</span>
cxk<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'jntm'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cxk<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//jntm</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token comment">//name is not defined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>函数体内的<code>var name = 'cxk'</code>只有<code>getName</code>和<code>setName</code>两个函数可以访问，外部无法访问，相对于将变量私有化。</p> <h2 id="javascript的作用域链理解吗？✨">JavaScript的作用域链理解吗？✨</h2> <p>JavaScript属于静态作用域，即声明的作用域是根据程序正文在编译时就确定的，有时也称为词法作用域。</p> <p>其本质是JavaScript在执行过程中会创造可执行上下文，可执行上下文中的词法环境中含有外部词法环境的引用，我们可以通过这个引用获取外部词法环境的变量、声明等，这些引用串联起来一直指向全局的词法环境，因此形成了作用域链。</p> <p><img src="https://xiaomuzhu-image.oss-cn-beijing.aliyuncs.com/0f1701f3b7061942ae24a9357f28bc2e.png" alt="2019-06-20-06-00-27"></p> <blockquote><p>原理详解请移步<a href="#mechanism">JavaScript执行机制</a></p></blockquote> <h2 id="es6模块与commonjs模块有什么区别？">ES6模块与CommonJS模块有什么区别？</h2> <p>ES6 Module和CommonJS模块的区别：</p> <ul><li>CommonJS是对模块的浅拷贝，ES6 Module是对模块的引用,即ES6 Module只存只读，不能改变其值，具体点就是指针指向不能变，类似const</li> <li>import的接口是read-only（只读状态），不能修改其变量值。
即不能修改其变量的指针指向，但可以改变变量内部指针指向,可以对commonJS对重新赋值（改变指针指向），但是对ES6 Module赋值会编译报错。</li></ul> <p>ES6 Module和CommonJS模块的共同点：</p> <ul><li>CommonJS和ES6 Module都可以对引入的对象进行赋值，即对对象内部属性的值进行改变。</li></ul> <blockquote><p>详解请移步<a href="http://es6.ruanyifeng.com/#docs/module-loader#ES6-%E6%A8%A1%E5%9D%97%E4%B8%8E-CommonJS-%E6%A8%A1%E5%9D%97%E7%9A%84%E5%B7%AE%E5%BC%82" target="_blank" rel="noopener noreferrer">ES6模块与CommonJS模块的差异<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h2 id="js有哪些类型？">js有哪些类型？</h2> <p>JavaScript的类型分为两大类，一类是原始类型，一类是复杂(引用）类型。</p> <p>原始类型:</p> <ul><li>boolean</li> <li>null</li> <li>undefined</li> <li>number</li> <li>string</li> <li>symbol</li></ul> <p>复杂类型:</p> <ul><li>Object</li></ul> <p>还有一个没有正式发布但即将被加入标准的原始类型BigInt。</p> <h2 id="为什么会有bigint的提案？">为什么会有BigInt的提案？</h2> <p>JavaScript中Number.MAX_SAFE_INTEGER表示最大安全数字,计算结果是9007199254740991，即在这个数范围内不会出现精度丢失（小数除外）。</p> <p>但是一旦超过这个范围，js就会出现计算不准确的情况，这在大数计算的时候不得不依靠一些第三方库进行解决，因此官方提出了BigInt来解决此问题。</p> <h2 id="null与undefined的区别是什么？">null与undefined的区别是什么？</h2> <p>null表示为空，代表此处不应该有值的存在，一个对象可以是null，代表是个空对象，而null本身也是对象。</p> <p>undefined表示『不存在』，JavaScript是一门动态类型语言，成员除了表示存在的空值外，还有可能根本就不存在（因为存不存在只在运行期才知道），这就是undefined的意义所在。</p> <h2 id="_0-1-0-2为什么不等于0-3？">0.1+0.2为什么不等于0.3？</h2> <p><img src="https://xiaomuzhu-image.oss-cn-beijing.aliyuncs.com/b9aa4056155df1baae69d6de5a0ac322.png" alt="2019-06-23-09-24-06"></p> <p>JS 的 <code>Number</code> 类型遵循的是 IEEE 754 标准，使用的是 64 位固定长度来表示。</p> <p>IEEE 754 浮点数由三个域组成，分别为 sign bit (符号位)、exponent bias (指数偏移值) 和 fraction (分数值)。64 位中，sign bit 占 1 位，exponent bias 占 11 位，fraction 占 52 位。</p> <p>通过公式表示浮点数的值 <strong>value = sign x exponent x fraction</strong><br>**<br>当一个数为正数，sign bit 为 0，当为负数时，sign bit 为 1.</p> <p>以 0.1 转换为 IEEE 754 标准表示为例解释一下如何求 exponent bias 和 fraction。转换过程主要经历 3 个过程：</p> <ol><li>将 0.1 转换为二进制表示</li> <li>将转换后的二进制通过科学计数法表示</li> <li>将通过科学计数法表示的二进制转换为 IEEE 754 标准表示</li></ol> <h3 id="将-0-1-转换为二进制表示">将 0.1 转换为二进制表示</h3> <p>回顾一下一个数的小数部分如何转换为二进制。一个数的小数部分，乘以 2，然后取整数部分的结果，再用计算后的小数部分重复计算，直到小数部分为 0 。</p> <p>因此 0.1 转换为二进制表示的过程如下：</p> <table><thead><tr><th style="text-align:center;">小数</th> <th style="text-align:center;">x2 的结果</th> <th style="text-align:center;">整数部分</th></tr></thead> <tbody><tr><td style="text-align:center;">0.1</td> <td style="text-align:center;">0.2</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">0.2</td> <td style="text-align:center;">0.4</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">0.4</td> <td style="text-align:center;">0.8</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">0.8</td> <td style="text-align:center;">1.6</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">0.6</td> <td style="text-align:center;">1.2</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">0.2</td> <td style="text-align:center;">0.4</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">0.4</td> <td style="text-align:center;">0.8</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">0.8</td> <td style="text-align:center;">1.6</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">0.6</td> <td style="text-align:center;">1.2</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">...</td> <td style="text-align:center;">...</td> <td style="text-align:center;">...</td></tr></tbody></table> <p>得到 0.1 的二进制表示为 0.00011...(无限重复 0011)</p> <h3 id="通过科学计数法表示">通过科学计数法表示</h3> <p>0.00011...(无限重复 0011) 通过科学计数法表示则是 1.10011001...(无线重复 1001)*2</p> <h3 id="转换为-ieee-754-标准表示">转换为 IEEE 754 标准表示</h3> <p>当经过科学计数法表示之后，就可以求得 exponent bias 和 fraction 了。</p> <p>exponent bias (指数偏移值) <strong>等于</strong> 双精度浮点数<strong>固定偏移值</strong> (2-1) 加上指数实际值(即 2 中的 -4) 的 <strong>11 位二进制表示</strong>。为什么是 11 位？因为 exponent bias 在 64 位中占 11 位。</p> <p>因此 0.1 的 exponent bias <strong>等于</strong> 1023 + (-4) = 1019 的11 位二进制表示，即 011 1111 1011。</p> <p>再来获取 0.1 的 fraction，fraction 就是 1.10011001...(无线重复 1001) 中的小数位，由于 fraction 占 52位所以抽取 52 位小数，1001...(中间有 11 个 1001)...1010 <strong>(请注意最后四位，是 1010 而不是 1001，因为四舍五入有进位，这个进位就是造成 0.1 + 0.2 不等于 0.3 的原因)</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    0       011 1111 1011   1001...( 11 x 1001)...1010
(sign bit) (exponent bias)      (fraction)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>此时如果将这个数转换为十进制，可以发现值已经变为 0.100000000000000005551115123126 而不是 0.1 了，因此这个计算精度就出现了问题。</p> <h2 id="类型转换的规则有哪些？">类型转换的规则有哪些？</h2> <p>在if语句、逻辑语句、数学运算逻辑、==等情况下都可能出现隐士类型转换。</p> <p><img src="https://xiaomuzhu-image.oss-cn-beijing.aliyuncs.com/c378afab84afcdf430aec5229649faee.png" alt="2019-06-23-09-32-17"></p> <h2 id="类型转换的原理是什么？">类型转换的原理是什么？</h2> <p><strong>类型转换</strong>指的是将一种类型转换为另一种类型,例如:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//string</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>当然,<strong>类型转换</strong>分为显式和隐式,但是不管是隐式转换还是显式转换,都会遵循一定的原理,由于JavaScript是一门动态类型的语言,可以随时赋予任意值,但是各种运算符或条件判断中是需要特定类型的,因此JavaScript引擎会在运算时为变量设定类型.</p> <p>这看起来很美好,JavaScript引擎帮我们搞定了<code>类型</code>的问题,但是引擎毕竟不是ASI(超级人工智能),它的很多动作会跟我们预期相去甚远,我们可以从一到面试题开始.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>答案是0</p> <p>是什么原因造成了上述结果呢?那么我们得从ECMA-262中提到的转换规则和抽象操作说起,有兴趣的童鞋可以仔细阅读下这浩如烟海的<a href="http://ecma-international.org/ecma-262/5.1/" target="_blank" rel="noopener noreferrer">语言规范<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,如果没这个耐心还是往下看.</p> <p>这是JavaScript种类型转换可以从<strong>原始类型</strong>转为<strong>引用类型</strong>,同样可以将<strong>引用类型</strong>转为<strong>原始类型</strong>,转为原始类型的抽象操作为<code>ToPrimitive</code>,而后续更加细分的操作为:<code>ToNumber ToString ToBoolean</code>。</p> <p>为了更深入的探究JavaScript引擎是如何处理代码中类型转换问题的,就需要看 ECMA-262详细的规范,从而探究其内部原理,我们从这段内部原理示意代码开始.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ECMA-262, section 9.1, page 30. Use null/undefined for no hint,</span>
<span class="token comment">// (1) for number hint, and (2) for string hint.</span>
<span class="token keyword">function</span> <span class="token function">ToPrimitive</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> hint<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  <span class="token comment">// Fast case check.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">IS_STRING</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>
  <span class="token comment">// Normal behavior.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">IS_SPEC_OBJECT</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">IS_SYMBOL_WRAPPER</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">MakeTypeError</span><span class="token punctuation">(</span>kSymbolToPrimitive<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">==</span> <span class="token constant">NO_HINT</span><span class="token punctuation">)</span> hint <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">IS_DATE</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token constant">STRING_HINT</span> <span class="token punctuation">:</span> <span class="token constant">NUMBER_HINT</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>hint <span class="token operator">==</span> <span class="token constant">NUMBER_HINT</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">DefaultNumber</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">DefaultString</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ECMA-262, section 8.6.2.6, page 28.</span>
<span class="token keyword">function</span> <span class="token function">DefaultNumber</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">IS_SYMBOL_WRAPPER</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> valueOf <span class="token operator">=</span> x<span class="token punctuation">.</span>valueOf<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">IS_SPEC_FUNCTION</span><span class="token punctuation">(</span>valueOf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> v <span class="token operator">=</span> <span class="token operator">%</span><span class="token function">_CallFunction</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> valueOf<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsPrimitive</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> v<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> toString <span class="token operator">=</span> x<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">IS_SPEC_FUNCTION</span><span class="token punctuation">(</span>toString<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token operator">%</span><span class="token function">_CallFunction</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> toString<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsPrimitive</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> s<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">throw</span> <span class="token function">MakeTypeError</span><span class="token punctuation">(</span>kCannotConvertToPrimitive<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ECMA-262, section 8.6.2.6, page 28.</span>
<span class="token keyword">function</span> <span class="token function">DefaultString</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">IS_SYMBOL_WRAPPER</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> toString <span class="token operator">=</span> x<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">IS_SPEC_FUNCTION</span><span class="token punctuation">(</span>toString<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token operator">%</span><span class="token function">_CallFunction</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> toString<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsPrimitive</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> s<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> valueOf <span class="token operator">=</span> x<span class="token punctuation">.</span>valueOf<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">IS_SPEC_FUNCTION</span><span class="token punctuation">(</span>valueOf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> v <span class="token operator">=</span> <span class="token operator">%</span><span class="token function">_CallFunction</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> valueOf<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsPrimitive</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> v<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">throw</span> <span class="token function">MakeTypeError</span><span class="token punctuation">(</span>kCannotConvertToPrimitive<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>上面代码的逻辑是这样的：</p> <ol><li>如果变量为字符串，直接返回.</li> <li>如果<code>!IS_SPEC_OBJECT(x)</code>，直接返回.</li> <li>如果<code>IS_SYMBOL_WRAPPER(x)</code>，则抛出异常.</li> <li>否则会根据传入的<code>hint</code>来调用<code>DefaultNumber</code>和<code>DefaultString</code>，比如如果为<code>Date</code>对象，会调用<code>DefaultString</code>.</li> <li><code>DefaultNumber</code>：首<code>先x.valueOf</code>，如果为<code>primitive</code>，则返回<code>valueOf</code>后的值，否则继续调用<code>x.toString</code>，如果为<code>primitive</code>，则返回<code>toString</code>后的值，否则抛出异常</li> <li><code>DefaultString</code>：和<code>DefaultNumber</code>正好相反，先调用<code>toString</code>，如果不是<code>primitive</code>再调用<code>valueOf</code>.</li></ol> <p>那讲了实现原理，这个<code>ToPrimitive</code>有什么用呢？实际很多操作会调用<code>ToPrimitive</code>，比如加、相等或比较操。在进行加操作时会将左右操作数转换为<code>primitive</code>，然后进行相加。</p> <p>下面来个实例，({}) + 1（将{}放在括号中是为了内核将其认为一个代码块）会输出啥？可能日常写代码并不会这样写，不过网上出过类似的面试题。</p> <p>加操作只有左右运算符同时为<code>String或Number</code>时会执行对应的<code>%_StringAdd或%NumberAdd</code>，下面看下<code>({}) + 1</code>内部会经过哪些步骤：</p> <p><code>{}</code>和<code>1</code>首先会调用ToPrimitive
<code>{}</code>会走到<code>DefaultNumber</code>，首先会调用<code>valueOf</code>，返回的是<code>Object</code> <code>{}</code>，不是primitive类型，从而继续走到<code>toString</code>，返回<code>[object Object]</code>，是<code>String</code>类型
最后加操作，结果为<code>[object Object]1</code>
再比如有人问你<code>[] + 1</code>输出啥时，你可能知道应该怎么去计算了，先对<code>[]</code>调用<code>ToPrimitive</code>，返回空字符串，最后结果为&quot;1&quot;。</p> <h2 id="谈谈你对原型链的理解？✨">谈谈你对原型链的理解？✨</h2> <p>这个问题关键在于两个点，一个是原型对象是什么，另一个是原型链是如何形成的</p> <h3 id="原型对象">原型对象</h3> <p>绝大部分的函数(少数内建函数除外)都有一个<code>prototype</code>属性,这个属性是原型对象用来创建新对象实例,而所有被创建的对象都会共享原型对象,因此这些对象便可以访问原型对象的属性。</p> <p>例如<code>hasOwnProperty()</code>方法存在于Obejct原型对象中,它便可以被任何对象当做自己的方法使用.</p> <blockquote><p>用法：<code>object.hasOwnProperty( propertyName )</code></p></blockquote> <blockquote><p><code>hasOwnProperty()</code>函数的返回值为<code>Boolean</code>类型。如果对象<code>object</code>具有名称为<code>propertyName</code>的属性，则返回<code>true</code>，否则返回<code>false</code>。</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;Messi&quot;</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> <span class="token number">29</span><span class="token punctuation">,</span>
    profession<span class="token punctuation">:</span> <span class="token string">&quot;football player&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;hasOwnProperty&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;hasOwnProperty&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>由以上代码可知,<code>hasOwnProperty()</code>并不存在于<code>person</code>对象中,但是<code>person</code>依然可以拥有此方法.</p> <p>所以<code>person</code>对象是如何找到<code>Object</code>对象中的方法的呢?靠的是原型链。</p> <h3 id="原型链">原型链</h3> <p>原因是每个对象都有 <code>__proto__</code> 属性，此属性指向该对象的构造函数的原型。</p> <p>对象可以通过 <code>__proto__</code>与上游的构造函数的原型对象连接起来，而上游的原型对象也有一个<code>__proto__</code>，这样就形成了原型链。</p> <blockquote><p>经典原型链图</p></blockquote> <p><img src="https://xiaomuzhu-image.oss-cn-beijing.aliyuncs.com/282ef60fe1dfe60924c6caeaeab6c550.png" alt="2019-06-15-05-36-59"></p> <h2 id="如何判断是否是数组？">如何判断是否是数组？</h2> <p>es6中加入了新的判断方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span>（Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>）<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在考虑兼容性的情况下可以用toString的方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span>isArray<span class="token punctuation">)</span><span class="token punctuation">{</span>
    Array<span class="token punctuation">.</span><span class="token function-variable function">isArray</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token operator">===</span><span class="token string">'[object Array]'</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="谈一谈你对this的了解？✨">谈一谈你对this的了解？✨</h2> <p>this的指向不是在编写时确定的,而是在执行时确定的，同时，this不同的指向在于遵循了一定的规则。</p> <p>首先，在默认情况下，this是指向全局对象的，比如在浏览器就是指向window。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>name <span class="token operator">=</span> <span class="token string">&quot;Bale&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">sayName</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;Bale&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>其次，如果函数被调用的位置存在上下文对象时，那么函数是被隐式绑定的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;Messi&quot;</span><span class="token punctuation">,</span>
    f<span class="token punctuation">:</span> f
<span class="token punctuation">}</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//被调用的位置恰好被对象obj拥有，因此结果是Messi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>再次，显示改变this指向，常见的方法就是call、apply、bind</p> <p>以bind为例:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;Messi&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
     name<span class="token punctuation">:</span> <span class="token string">&quot;Bale&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

f<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Messi ,由于bind将obj绑定到f函数上后返回一个新函数,因此需要再在后面加上括号进行执行,这是bind与apply和call的区别</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>最后，也是优先级最高的绑定 new 绑定。</p> <p>用 new 调用一个构造函数，会创建一个新对象, 在创造这个新对象的过程中,新对象会自动绑定到Person对象的this上，那么 this 自然就指向这个新对象。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Messi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Messi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>绑定优先级:  new绑定 &gt; 显式绑定 &gt;隐式绑定 &gt;默认绑定</p></blockquote> <h2 id="那么箭头函数的this指向哪里？✨">那么箭头函数的this指向哪里？✨</h2> <p>箭头函数不同于传统JavaScript中的函数,箭头函数并没有属于自己的this,它的所谓的this是捕获其所在上下文的 this 值，作为自己的 this 值,并且由于没有属于自己的this,而箭头函数是不会被new调用的，这个所谓的this也不会被改变.</p> <p>我们可以用Babel理解一下箭头函数:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ES6</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">getArrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>转化后</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ES5，由 Babel 转译</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    getArrow<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token function">getArrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_this <span class="token operator">===</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="async-await是什么？">async/await是什么？</h2> <p>async 函数，就是 Generator 函数的语法糖，它建立在Promises上，并且与所有现有的基于Promise的API兼容。</p> <ol><li>Async—声明一个异步函数(async function someName(){...})</li></ol> <ul><li>自动将常规函数转换成Promise，返回值也是一个Promise对象</li> <li>只有async函数内部的异步操作执行完，才会执行then方法指定的回调函数</li> <li>异步函数内部可以使用await</li></ul> <ol start="2"><li>Await—暂停异步的功能执行(var result = await someAsyncCall()😉</li></ol> <ul><li>放置在Promise调用之前，await强制其他代码等待，直到Promise完成并返回结果</li> <li>只能与Promise一起使用，不适用与回调</li> <li>只能在async函数内部使用</li></ul> <h2 id="async-await相比于promise的优势？">async/await相比于Promise的优势？</h2> <ul><li>代码读起来更加同步，Promise虽然摆脱了回调地狱，但是then的链式调用也会带来额外的阅读负担</li> <li>Promise传递中间值非常麻烦，而async/await几乎是同步的写法，非常优雅</li> <li>错误处理友好，async/await可以用成熟的try/catch，Promise的错误捕获非常冗余</li> <li>调试友好，Promise的调试很差，由于没有代码块，你不能在一个返回表达式的箭头函数中设置断点，如果你在一个.then代码块中使用调试器的步进(step-over)功能，调试器并不会进入后续的.then代码块，因为调试器只能跟踪同步代码的『每一步』。</li></ul> <h2 id="javascript的参数是按照什么方式传递的？">JavaScript的参数是按照什么方式传递的？</h2> <h3 id="基本类型传递方式">基本类型传递方式</h3> <p>由于js中存在<strong>复杂类型</strong>和<strong>基本类型</strong>,对于<strong>基本类型</strong>而言,是按值传递的.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>虽然在函数<code>test</code>中<code>a</code>被修改,并没有有影响到
外部<code>a</code>的值,基本类型是按值传递的.</p> <h3 id="复杂类型按引用传递">复杂类型按引用传递?</h3> <p>我们将外部<code>a</code>作为一个对象传入<code>test</code>函数.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  x<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { a: 10, b: 2 }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { a: 10, b: 2 }</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>可以看到,在函数体内被修改的<code>a</code>对象也同时影响到了外部的<code>a</code>对象,可见复杂类型是按<strong>引用传递的</strong>.</p> <p>可是如果再做一个实验:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { a: 1, b: 2 }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>外部的<code>a</code>并没有被修改,如果是按引用传递的话,由于共享同一个堆内存,<code>a</code>在外部也会表现为<code>10</code>才对.
此时的复杂类型同时表现出了<code>按值传递</code>和<code>按引用传递</code>的特性.</p> <h3 id="按共享传递">按共享传递</h3> <p>复杂类型之所以会产生这种特性,原因就是在传递过程中,对象<code>a</code>先产生了一个<code>副本a</code>,这个<code>副本a</code>并不是深克隆得到的<code>副本a</code>,<code>副本a</code>地址同样指向对象<code>a</code>指向的堆内存.</p> <p><img src="http://omrbgpqyl.bkt.clouddn.com/17-8-31/72507393.jpg" alt=""></p> <p>因此在函数体中修改<code>x=10</code>只是修改了<code>副本a</code>,<code>a</code>对象没有变化.
但是如果修改了<code>x.a=10</code>是修改了两者指向的同一堆内存,此时对象<code>a</code>也会受到影响.</p> <p>有人讲这种特性叫做<strong>传递引用</strong>,也有一种说法叫做<strong>按共享传递</strong>.</p> <h2 id="聊一聊如何在javascript中实现不可变对象？">聊一聊如何在JavaScript中实现不可变对象？</h2> <p>实现不可变数据有三种主流的方法</p> <ol><li>深克隆，但是深克隆的性能非常差，不适合大规模使用</li> <li>Immutable.js，Immutable.js是自成一体的一套数据结构，性能良好，但是需要学习额外的API</li> <li>immer，利用Proxy特性，无需学习额外的api，性能良好</li></ol> <blockquote><p>原理详解请移步<a href="#immuatble">实现JavaScript不可变数据</a></p></blockquote> <h2 id="javascript的基本类型和复杂类型是储存在哪里的？">JavaScript的基本类型和复杂类型是储存在哪里的？</h2> <p>基本类型储存在栈中，但是一旦被闭包引用则成为常住内存，会储存在内存堆中。</p> <p>复杂类型会储存在内存堆中。</p> <blockquote><p>原理解析请移步<a href="/offer/#memory.html">JavaScript内存管理</a></p></blockquote> <h2 id="讲讲javascript垃圾回收是怎么做的？">讲讲JavaScript垃圾回收是怎么做的？</h2> <p>此过程比较复杂，请看详细解析。</p> <blockquote><p>原理解析请移步<a href="/offer/#memory.html">JavaScript内存管理</a></p></blockquote> <hr></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/zhenquan321/edit/master/src/offer/jsBasic.md" target="_blank" rel="noopener noreferrer">Found a bug? Help me improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/offer/cssBasic.html" class="prev">
          CSS基础
        </a></span> <span class="next"><a href="/offer/es6-7-8.html">
          ES6/7/8
        </a>
        →
      </span></p></div> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.239b68c1.js" defer></script><script src="/assets/js/4.d46d2a2b.js" defer></script><script src="/assets/js/108.9ca655c2.js" defer></script>
  </body>
</html>
